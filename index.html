<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Interactive Repository Viewer</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.0/openseadragon.min.js"></script>
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>

    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background-color: #f4f4f4; font-family: sans-serif; }
        
        /* The Main Viewer Container */
        #viewer-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Slide Styles */
        .slide {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none; /* Hidden by default */
        }
        .slide.active { display: block; }

        /* Navigation Buttons */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 999;
            background: rgba(120, 47, 64, 0.8); /* FSU Garnet-ish */
            color: white;
            border: none;
            padding: 20px;
            font-size: 24px;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .nav-btn:active { background: rgba(120, 47, 64, 1); }
        #prev-btn { left: 20px; }
        #next-btn { right: 20px; }

        /* Specific Viewer Styles */
        #osd-image-viewer { width: 100%; height: 100%; background: #e5e5e5; }
        model-viewer { width: 100%; height: 100%; background-color: #333; }
        
        /* Caption Box */
        .caption {
            position: absolute;
            bottom: 20px; left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            text-align: center;
            pointer-events: none; /* Let touches pass through to image */
        }
    </style>
</head>
<body>

    <div id="viewer-container">
        
        <button id="prev-btn" class="nav-btn" onclick="changeSlide(-1)">&#10094;</button>
        <button id="next-btn" class="nav-btn" onclick="changeSlide(1)">&#10095;</button>

        <div class="slide active" id="slide-1">
            <div id="osd-image-viewer"></div>
            <div class="caption">
                <strong>Paul A.M. Dirac Papers</strong><br>
                Pinch to Zoom & Pan
            </div>
        </div>

        <div class="slide" id="slide-2">
            <model-viewer 
                src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" 
                alt="3D Artifact"
                auto-rotate
                camera-controls
                ar>
            </model-viewer>
            <div class="caption">
                <strong>Ancient Artifact</strong><br>
                Swipe to Rotate â€¢ Pinch to Zoom
            </div>
        </div>

    </div>

    <script>
        // --- 1. SETUP IMAGE VIEWER ---
        // Initialize OpenSeadragon on the div 'osd-image-viewer'
        var viewer = OpenSeadragon({
            id: "osd-image-viewer",
            prefixUrl: "https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.0/images/",
            tileSources: {
                type: 'image',
                // Using the direct image link you provided (proxied via a service often needed for OSD if not tiled)
                // For best results, convert your image to DZI format, but this works for single images:
                url: "https://purl.flvc.org/fsu/fd/FSUDirac_12_1b_0012",
                buildPyramid: false // Set to true if you have a real DZI tile source
            },
            showNavigator: true,
            visibilityRatio: 1.0,
            constrainDuringPan: true,
        });

        // --- 2. SETUP NAVIGATION LOGIC ---
        let currentSlideIndex = 0;
        const slides = document.querySelectorAll('.slide');

        function changeSlide(direction) {
            // Hide current
            slides[currentSlideIndex].classList.remove('active');
            
            // Calculate next index
            currentSlideIndex += direction;
            if (currentSlideIndex >= slides.length) currentSlideIndex = 0;
            if (currentSlideIndex < 0) currentSlideIndex = slides.length - 1;

            // Show new
            slides[currentSlideIndex].classList.add('active');
        }
    </script>

</body>
</html>